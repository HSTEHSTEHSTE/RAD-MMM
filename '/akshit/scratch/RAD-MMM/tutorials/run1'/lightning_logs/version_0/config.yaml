# pytorch_lightning==2.0.2
seed_everything: 42
trainer:
  accelerator: auto
  strategy: ddp_notebook
  devices: '1'
  num_nodes: 1
  precision: 32
  logger: true
  callbacks: null
  fast_dev_run: false
  max_epochs: -1
  min_epochs: null
  max_steps: -1
  min_steps: null
  max_time: null
  limit_train_batches: null
  limit_val_batches: null
  limit_test_batches: null
  limit_predict_batches: null
  overfit_batches: 0.0
  val_check_interval: 200
  check_val_every_n_epoch: null
  num_sanity_val_steps: 0
  log_every_n_steps: 10
  enable_checkpointing: true
  enable_progress_bar: true
  enable_model_summary: true
  accumulate_grad_batches: 1
  gradient_clip_val: 1.0
  gradient_clip_algorithm: norm
  deterministic: null
  benchmark: null
  inference_mode: true
  use_distributed_sampler: true
  profiler: null
  detect_anomaly: false
  barebones: false
  plugins: null
  sync_batchnorm: false
  reload_dataloaders_every_n_epochs: 0
model:
  decoder:
    class_path: decoders.RADMMMFlow
    init_args:
      n_speaker_dim: 16
      use_accent: true
      n_accent_dim: 8
      n_text_dim: 520
      n_group_size: 2
      n_mel_channels: 80
      use_spk_emb_for_alignment: false
      n_f0_dims: 1
      n_energy_avg_dims: 1
      context_w_f0_and_energy: true
      use_context_lstm: true
      context_lstm_norm: null
      n_flows: 8
      n_conv_layers_per_step: 4
      n_early_size: 2
      n_early_every: 2
      affine_model: wavenet
      scaling_fn: tanh
      affine_activation: softplus
      use_partial_padding: true
      n_splines: 0
      use_bn: true
      freeze_whitening_layer: false
      use_accent_emb_for_decoder: false
  decoder_loss:
    class_path: loss.RADMMMLoss
    init_args:
      sigma: 1.0
      n_group_size: 2
      CTC_blank_logprob: -1
      kl_loss_start_iter: 25000
      binarization_loss_weight: 1.0
      ctc_loss_weight: 0.1
      use_spk_embed_reg: false
      use_accent_embed_reg: false
      reg_loss_config: null
      use_spk_accent_cross_covariance: false
      cross_reg_loss_config: null
  text_encoder:
    class_path: common.Encoder
    init_args:
      encoder_n_convolutions: 3
      encoder_embedding_dim: 520
      encoder_kernel_size: 5
      lstm_norm_fn: spectral
  f0_predictor:
    class_path: attribute_predictors.ConvLSTMLinearDAP
    init_args:
      n_speaker_dim: 16
      n_accent_dim: 0
      in_dim: 520
      out_dim: 1
      reduction_factor: 16
      n_backbone_layers: 3
      n_hidden: 256
      kernel_size: 15
      p_dropout: 0.5
      target_scale: 1
      target_offset: -5
      log_target: false
      lstm_type: bilstm
      use_speaker_embedding: true
      normalize_target: true
      normalization_type: norm_log_space
  f0_predictor_loss:
    class_path: loss.AttributeRegressionLoss
    init_args:
      prefix: f0_
      weight: 1.0
  energy_predictor:
    class_path: attribute_predictors.ConvLSTMLinearDAP
    init_args:
      n_speaker_dim: 16
      n_accent_dim: 0
      in_dim: 520
      out_dim: 1
      reduction_factor: 16
      n_backbone_layers: 3
      n_hidden: 256
      kernel_size: 5
      p_dropout: 0.5
      target_scale: 1
      target_offset: -0.75
      log_target: false
      lstm_type: bilstm
      use_speaker_embedding: true
      normalize_target: false
      normalization_type: null
  energy_predictor_loss:
    class_path: loss.AttributeRegressionLoss
    init_args:
      prefix: energy_
      weight: 1.0
  voiced_predictor:
    class_path: attribute_predictors.ConvLSTMLinearDAP
    init_args:
      n_speaker_dim: 16
      n_accent_dim: 0
      in_dim: 520
      out_dim: 1
      reduction_factor: 16
      n_backbone_layers: 3
      n_hidden: 256
      kernel_size: 5
      p_dropout: 0.5
      target_scale: 1
      target_offset: 0
      log_target: false
      lstm_type: bilstm
      use_speaker_embedding: true
      normalize_target: false
      normalization_type: null
  voiced_predictor_loss:
    class_path: loss.AttributeRegressionLoss
    init_args:
      prefix: vpred_
      weight: 1.0
  duration_predictor:
    class_path: attribute_predictors.ConvLSTMLinearDAP
    init_args:
      n_speaker_dim: 16
      n_accent_dim: 0
      in_dim: 520
      out_dim: 1
      reduction_factor: 16
      n_backbone_layers: 3
      n_hidden: 256
      kernel_size: 11
      p_dropout: 0.5
      target_scale: 1
      target_offset: 0
      log_target: true
      lstm_type: bilstm
      use_speaker_embedding: true
      normalize_target: false
      normalization_type: null
  duration_predictor_loss:
    class_path: loss.AttributeRegressionLoss
    init_args:
      prefix: duration_
      weight: 1.0
  speaker_embed_regularization_loss:
    class_path: loss.VarianceCovarianceEmbeddingRegLoss
    init_args:
      name: speaker
      loss_variance_weight: 0.0
      loss_covariance_weight: 0.0
      gamma: 1.0
  accent_embed_regularization_loss: null
  speaker_accent_cross_regularization_loss:
    class_path: loss.AttributeMinCrossCovarianceRegLoss
    init_args:
      attr_name1: speaker
      attr_name2: accent
      loss_cross_covariance_weight: 1.0
      gamma: 1
  optim_algo: RAdam
  learning_rate: 0.0001
  weight_decay: 1.0e-06
  sigma: 1.0
  iters_per_checkpoint: 3000
  seed: null
  unfreeze_modules: all
  binarization_start_iter: 0
  output_directory: '''/akshit/scratch/RAD-MMM/tutorials/run1'''
  log_decoder_samples: true
  scale_mel: true
  vocoder_config_path: /akshit/scratch/generator_ckpt/hfg_public/config_16khz.json
  vocoder_checkpoint_path: /akshit/scratch/generator_ckpt/hfg_public/g_00072000
  p_estimate_ambiguous_phonemes: 0.0
  phoneme_estimation_start_iter: 1000
  decoder_path: /akshit/scratch/generator_ckpt/radmmm_public/decoder.ckpt
  encoders_path: /akshit/scratch/generator_ckpt/radmmm_public/decoder.ckpt
  f0_loss_voiced_only: true
  n_speakers: 7
  n_speaker_dim: 16
  use_accent: true
  n_accents: 7
  n_accent_dim: 8
  n_text_dim: 512
  n_text_tokens: 426
  lstm_norm_fn: spectral
  n_mel_channels: 80
  use_syncbnorm: false
  prediction_output_dir: '''/akshit/scratch/RAD-MMM/tutorials/out1'''
  predict_mode: tts
  use_accent_emb_for_encoder: true
  use_accent_emb_for_decoder: false
  use_accent_emb_for_alignment: false
  use_speaker_emb_for_alignment: true
  n_augmentations: 2
data:
  dataloader_type: txt
  training_files:
    LJS:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/LJSpeech-1.0
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: LJSpeech/ljs_audiopath_text_sid_emotion_duration_train_filelist_phonemized.txt
      language: en_US
      phonemized: true
    BerndUngerer:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/HUI-Audio-Corpus-German/Bernd_Ungerer
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: HUI-Audio-Corpus-German/Bernd_Ungerer/berndungerer_audiopath_text_sid_emotion_duration_train_filelist_filtered_phonemized.txt
      language: de_DE
      phonemized: true
    TUX:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/MAILABS/es_ES/male/tux
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: MAILABS/es_ES/male/tux/tux_audiopath_text_sid_emotion_duration_train_filelist_filtered_phonemized.txt
      language: es_ES
      phonemized: true
    Karen:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/MAILABS/es_MX/female/karen_savage
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: MAILABS/es_MX/female/karen_savage/ks_audiopath_text_sid_emotion_duration_train_filelist_phonemized.txt
      language: es_MX
      phonemized: true
    NadineEckert:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/MAILABS/fr_FR/female/nadine_eckert_boulet/
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: MAILABS/fr_FR/female/nadine_eckert_boulet/nadineeckert_audiopath_text_sid_emotion_duration_train_filelist_filtered_phonemized.txt
      language: fr_FR
      phonemized: true
    IIIT-HYD:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/indic-languages-tts-iiit-h
      sampling_rate: 16khz_single_channel
      filelist_basedir: datasets/opensource/
      filelist: indic-languages-tts-iiit-h/hi_indic_iiit_hyderbad_audiopath_text_sid_emotion_duration_train_phonemized.txt
      language: hi_HI
      phonemized: true
    ED:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/TTS-Portuguese-Corpus/
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: TTS-Portuguese-Corpus/ed_portuguese_audiopath_transcript_sid_emotion_duration_train_phonemized.txt
      language: pt_BR
      phonemized: true
  validation_files:
    LJS:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/LJSpeech-1.0
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: LJSpeech/ljs_audiopath_text_sid_emotion_duration_val_filelist_phonemized.txt
      language: en_US
      phonemized: true
    BerndUngerer:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/HUI-Audio-Corpus-German/Bernd_Ungerer
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: HUI-Audio-Corpus-German/Bernd_Ungerer/berndungerer_audiopath_text_sid_emotion_duration_val_filelist_phonemized.txt
      language: de_DE
      phonemized: true
    TUX:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/MAILABS/es_ES/male/tux
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: MAILABS/es_ES/male/tux/tux_audiopath_text_sid_emotion_duration_val_filelist_phonemized.txt
      language: es_ES
      phonemized: true
    Karen:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/MAILABS/es_MX/female/karen_savage
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: MAILABS/es_MX/female/karen_savage/ks_audiopath_text_sid_emotion_duration_val_filelist_phonemized.txt
      language: es_MX
      phonemized: true
    NadineEckert:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/MAILABS/fr_FR/female/nadine_eckert_boulet/
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: MAILABS/fr_FR/female/nadine_eckert_boulet/nadineeckert_audiopath_text_sid_emotion_duration_val_filelist_phonemized.txt
      language: fr_FR
      phonemized: true
    IIIT-HYD:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/indic-languages-tts-iiit-h
      sampling_rate: 16khz_single_channel
      filelist_basedir: datasets/opensource/
      filelist: indic-languages-tts-iiit-h/hi_indic_iiit_hyderbad_audiopath_text_sid_emotion_duration_val_phonemized.txt
      language: hi_HI
      phonemized: true
    ED:
      basedir: /home/dcg-adlr-rbadlani-data/multilingual-dataset/opensource/TTS-Portuguese-Corpus/
      sampling_rate: 16khz
      filelist_basedir: datasets/opensource/
      filelist: TTS-Portuguese-Corpus/ed_portuguese_audiopath_transcript_sid_emotion_duration_val_phonemized.txt
      language: pt_BR
      phonemized: true
  filter_length: 1024
  hop_length: 256
  win_length: 1024
  sampling_rate: 16000
  n_mel_channels: 80
  mel_fmin: 0.0
  mel_fmax: 8000.0
  f0_min: 80.0
  f0_max: 640.0
  max_wav_value: 32768.0
  use_f0: true
  use_energy_avg: true
  use_log_f0: true
  use_scaled_energy: true
  symbol_set: radmmm_phonemizer_marker_segregated
  cleaner_names:
  - radtts_cleaners
  heteronyms_path: tts_text_processing/heteronyms
  phoneme_dict_path: tts_text_processing/cmudict-0.7b
  p_phoneme: 1.0
  handle_phoneme: word
  handle_phoneme_ambiguous: ignore
  speaker_ids: null
  include_speakers: null
  n_frames: -1
  use_attn_prior_masking: true
  prepend_space_to_text: true
  append_space_to_text: true
  add_bos_eos_to_text: false
  betabinom_cache_path: /home/dcg-adlr-rbadlani-data/datasets/betabinom_cache2/
  betabinom_scaling_factor: 0.05
  lmdb_cache_path: null
  dur_min: 0.1
  dur_max: 10.2
  combine_speaker_and_emotion: true
  distance_tx_unvoiced: false
  mel_noise_scale: 0.0
  scale_mel: true
  speaker_map: null
  accent_map: null
  use_prior_interpolator: true
  batch_size: 1
  num_workers: 4
  phonemizer_cfg: '{"en_US": "assets/en_US_word_ipa_map.txt","es_MX": "assets/es_MX_word_ipa_map.txt","de_DE":
    "assets/de_DE_word_ipa_map.txt","en_UK": "assets/en_UK_word_ipa_map.txt","es_CO":
    "assets/es_CO_word_ipa_map.txt","es_ES": "assets/es_ES_word_ipa_map.txt","fr_FR":
    "assets/fr_FR_word_ipa_map.txt","hi_HI": "assets/hi_HI_word_ipa_map.txt","pt_BR":
    "assets/pt_BR_word_ipa_map.txt","te_TE": "assets/te_TE_word_ipa_map.txt"}'
  return_audio: false
  inference_transcript: '''model_inputs/resynthesis_prompts.json'''
  predict_mode: tts
  reconstruction_files: null
  prediction_recon_files: null
  use_multilingual_model: true
  use_wave_augmentations: false
  wave_aug_config:
    aug_types:
    - none
    - scale_formant
    - scale_formant
    aug_scales:
    - 1.0
    - 0.9
    - 1.1
    aug_probabilities:
    - 0.6
    - 0.2
    - 0.2
    aug_languages_applicable:
    - te_TE
    - hi_HI
    - mar_MAR
    - en_US
    - fr_FR
    - de_DE
    - pt_BR
    - es_ES
    - es_MX
    - en_UK
    - es_CO
    num_aug_in_batch: 1
    randomize_transform: false
    n_augmentations: 2
  g2p_type: phonemizer
  speaker_stats_path: datasets/speaker_stats/opensource_collated_stats.json
  include_emotions:
  - - - other
    - true
  f0_pred_type: norm_log_f0
checkpoint_callback:
  filename: latest-epoch_{epoch}-iter_{global_step:.0f}
  monitor: global_step
  verbose: false
  save_last: null
  save_top_k: -1
  save_weights_only: false
  mode: max
  auto_insert_metric_name: false
  every_n_train_steps: 2000
  train_time_interval: null
  every_n_epochs: null
  save_on_train_epoch_end: null
